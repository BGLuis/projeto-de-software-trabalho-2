<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="745px" preserveAspectRatio="none" style="width:4492px;height:745px;background:#FFFFFF;" version="1.1" viewBox="0 0 4492 745" width="4492px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="470" x="2004" y="24.9659">Diagrama de Comunica&#231;&#227;o - UC-33: Atualizar Cap&#237;tulos (Re-scraping)</text><g id="elem_Client"><rect fill="#F1F1F1" height="58.1358" style="stroke:#181818;stroke-width:0.5;" width="62" x="134" y="155.2579"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="141" y="172.2239">:Admin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="145.5" y="191.2918">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="135" x2="195" y1="197.3938" y2="197.3938"/></g><g id="elem_Controller"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="168" x="554" y="164.7879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="561" y="181.7539">:AdminBooksController</text><line style="stroke:#181818;stroke-width:0.5;" x1="555" x2="721" y1="187.8558" y2="187.8558"/></g><g id="elem_ScrapingService"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="180" x="1097" y="164.7879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="1104" y="181.7539">:ChapterScrapingService</text><line style="stroke:#181818;stroke-width:0.5;" x1="1098" x2="1276" y1="187.8558" y2="187.8558"/></g><g id="elem_BookRepo"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="121" x="2858.5" y="164.7879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="2865.5" y="181.7539">:BookRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="2859.5" x2="2978.5" y1="187.8558" y2="187.8558"/></g><g id="elem_ChapterRepo"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="143" x="4189.5" y="164.7879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="4196.5" y="181.7539">:ChapterRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="4190.5" x2="4331.5" y1="187.8558" y2="187.8558"/></g><g id="elem_DBMaster"><rect fill="#F1F1F1" height="58.1358" style="stroke:#181818;stroke-width:0.5;" width="111" x="3451.5" y="155.2579"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="3473.5" y="172.2239">:Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="3458.5" y="191.2918">MySQL Master</text><line style="stroke:#181818;stroke-width:0.5;" x1="3452.5" x2="3561.5" y1="197.3938" y2="197.3938"/></g><g id="elem_Cache"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="96" x="4390" y="164.7879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="4397" y="181.7539">:RedisCache</text><line style="stroke:#181818;stroke-width:0.5;" x1="4391" x2="4485" y1="187.8558" y2="187.8558"/></g><g id="elem_Queue"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="111" x="2085.5" y="164.7879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="2092.5" y="181.7539">:QueueService</text><line style="stroke:#181818;stroke-width:0.5;" x1="2086.5" x2="2195.5" y1="187.8558" y2="187.8558"/></g><g id="elem_GMN21"><path d="M2255,143.9179 L2255,224.742 L2463,224.742 L2463,153.9179 L2453,143.9179 L2255,143.9179 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2453,143.9179 L2453,153.9179 L2463,153.9179 L2453,143.9179 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="2261" y="162.8149">Mode: "update"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="2261" y="180.5209">- S&#243; scraping novos cap&#237;tulos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="2261" y="198.227">- Compara com existentes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="2261" y="215.933">- N&#227;o refaz cap&#237;tulos completos</text></g><g id="elem_GMN29"><path d="M2521.5,126.2079 L2521.5,242.444 L2800.5,242.444 L2800.5,136.2079 L2790.5,126.2079 L2521.5,126.2079 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2790.5,126.2079 L2790.5,136.2079 L2800.5,136.2079 L2790.5,126.2079 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="2527.5" y="145.1049">L&#243;gica:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="2527.5" y="162.8109">1. Scrape lista de cap&#237;tulos do site</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="2527.5" y="180.517">2. Compara n&#250;meros com existingChapters</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="2527.5" y="198.223">3. Identifica novos (number &gt; max)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="2527.5" y="215.929">4. Scrape apenas novos cap&#237;tulos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="2527.5" y="233.635">5. N&#227;o reprocessa existentes</text></g><g id="elem_GMN35"><path d="M6,303.4479 L6,738.3923 A0,0 0 0 0 6,738.3923 L324,738.3923 A0,0 0 0 0 324,738.3923 L324,313.4479 L314,303.4479 L169,303.4479 L165,213.8479 L161,303.4479 L6,303.4479 A0,0 0 0 0 6,303.4479 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M314,303.4479 L314,313.4479 L324,313.4479 L314,303.4479 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="204" x="12" y="322.3449">Fluxo UC-33: Atualizar Cap&#237;tulos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="12" y="340.0509">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="12" y="357.757">1. Admin solicita atualiza&#231;&#227;o de cap&#237;tulos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="12" y="375.463">2. Sistema carrega cap&#237;tulos existentes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="12" y="393.169">3. Enfileira job de atualiza&#231;&#227;o</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="12" y="410.875">4. Retorna 202 Accepted</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="12" y="428.581">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="181" x="12" y="446.287">Processamento Ass&#237;ncrono:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="12" y="463.9931">5. Scrape lista atual do site</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="12" y="481.6991">6. Compara com cap&#237;tulos existentes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="12" y="499.4051">7. Identifica novos cap&#237;tulos (number &gt; max)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="12" y="517.1111">8. Scrape apenas novos cap&#237;tulos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="12" y="534.8171">9. Pula cap&#237;tulos j&#225; existentes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="12" y="552.5231">10. Atualiza cache</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="12" y="570.2292">11. Marca job como completo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="12" y="587.9352">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124" x="12" y="605.6412">Diferen&#231;a vs UC-47:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="12" y="623.3472">- UC-47: Scraping completo (todos cap&#237;tulos)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="12" y="641.0532">- UC-33: Incremental (apenas novos)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="12" y="658.7592">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="12" y="676.4653">Uso:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="12" y="694.1713">- Atualiza&#231;&#227;o peri&#243;dica de mang&#225;s em andamento</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="12" y="711.8773">- Economiza recursos (n&#227;o refaz existentes)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="12" y="729.5833">- Mant&#233;m hist&#243;rico de scraping</text></g><!--link Client to Controller--><g id="link_Client_Controller"><path codeLine="16" d="M196.4,184.3279 C268.31,184.3279 440.92,184.3279 547.66,184.3279 " fill="none" id="Client-to-Controller" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="553.66,184.3279,544.66,180.3279,548.66,184.3279,544.66,188.3279,553.66,184.3279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="11" x="225.5" y="159.2249">1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="239.5" y="159.2249">PATCH /admin/books/:bookId/chapters/update</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="272.5" y="176.9309">Authorization: Bearer adminToken</text></g><!--link Controller to Client--><g id="link_Controller_Client"><path codeLine="40" d="M553.52,197.8479 C528.04,201.3379 499.94,204.5979 474,206.3279 C386.2,212.1879 363.58,214.9179 276,206.3279 C248.82,203.6579 224.2729,198.7621 202.1729,193.6021 " fill="none" id="Controller-to-Client" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="196.33,192.2379,204.1848,198.1795,201.199,193.3748,206.0038,190.389,196.33,192.2379" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="11" x="277" y="202.2249">2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="291" y="202.2249">202 Accepted {jobId, message}</text></g><!--link Controller to ScrapingService--><g id="link_Controller_ScrapingService"><path codeLine="18" d="M722.08,196.5079 C753.38,200.4879 789.24,204.3779 822,206.3279 C899.64,210.9479 919.35,210.8079 997,206.3279 C1029.65,204.4379 1059.3538,201.4719 1090.8638,197.6419 " fill="none" id="Controller-to-ScrapingService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1096.82,196.9179,1087.4031,194.0331,1091.8565,197.5212,1088.3684,201.9746,1096.82,196.9179" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="823" y="202.2249">1.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="848" y="202.2249">updateChapters(bookId)</text></g><!--link ScrapingService to Controller--><g id="link_ScrapingService_Controller"><path codeLine="39" d="M1096.74,184.3279 C992.85,184.3279 829.57,184.3279 728.28,184.3279 " fill="none" id="ScrapingService-to-Controller" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="722.28,184.3279,731.28,188.3279,727.28,184.3279,731.28,180.3279,722.28,184.3279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="751.5" y="177.2249">1.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="776.5" y="177.2249">{jobId, status: "queued", currentChapters: count}</text></g><!--link ScrapingService to BookRepo--><g id="link_ScrapingService_BookRepo"><path codeLine="20" d="M1207.98,164.4079 C1233.05,142.1179 1277.35,107.3179 1323,93.4779 C1386.37,74.2579 1554.78,92.5779 1621,93.4779 C1889.74,97.1179 2573.46,46.0679 2830,126.2079 C2854.84,133.9679 2874.6229,147.0621 2891.6029,160.6321 " fill="none" id="ScrapingService-to-BookRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2896.29,164.3779,2891.7566,155.6345,2892.3841,161.2564,2886.7621,161.8839,2896.29,164.3779" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1324" y="92.1049">1.1.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1360" y="92.1049">findOne({id: bookId}, {relations: ['website']})</text></g><!--link BookRepo to ScrapingService--><g id="link_BookRepo_ScrapingService"><path codeLine="23" d="M2896.29,164.3779 C2879.31,150.8079 2854.84,133.9679 2830,126.2079 C2573.46,46.0679 1889.74,97.1179 1621,93.4779 C1554.78,92.5779 1386.37,74.2579 1323,93.4779 C1277.35,107.3179 1237.534,138.1312 1212.464,160.4212 " fill="none" id="BookRepo-to-ScrapingService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1207.98,164.4079,1217.3638,161.4171,1211.7166,161.0856,1212.0481,155.4385,1207.98,164.4079" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1438.5" y="92.1049">1.1.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1474.5" y="92.1049">book</text></g><!--link BookRepo to DBMaster--><g id="link_BookRepo_DBMaster"><path codeLine="21" d="M2979.99,184.3279 C3094.56,184.3279 3334.37,184.3279 3445.01,184.3279 " fill="none" id="BookRepo-to-DBMaster" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="3451.01,184.3279,3442.01,180.3279,3446.01,184.3279,3442.01,188.3279,3451.01,184.3279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="3009.5" y="177.2249">1.1.1.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="365" x="3056.5" y="177.2249">SELECT b.*, w.* FROM books b JOIN websites w WHERE b.id=?</text></g><!--link DBMaster to BookRepo--><g id="link_DBMaster_BookRepo"><path codeLine="22" d="M3451.2,191.6879 C3408.41,196.9579 3347.84,203.5679 3294.5,206.3279 C3224.37,209.9479 3206.63,209.8679 3136.5,206.3279 C3083.43,203.6479 3029.318,198.0266 2985.768,192.8466 " fill="none" id="DBMaster-to-BookRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2979.81,192.1379,2988.2746,197.1729,2984.775,192.7285,2989.2194,189.2289,2979.81,192.1379" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="3137.5" y="202.2249">1.1.1.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="3184.5" y="202.2249">book with website</text></g><!--link ScrapingService to ChapterRepo--><g id="link_ScrapingService_ChapterRepo"><path codeLine="25" d="M1277.31,176.8479 C1435.13,164.1079 1771.43,138.3879 2056,126.2079 C2830.54,93.0579 3024.79,100.7479 3800,93.4779 C3895.11,92.5879 3920.36,76.7979 4014,93.4779 C4089.8,106.9779 4167.3854,139.5153 4215.2854,161.9253 " fill="none" id="ScrapingService-to-ChapterRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="4220.72,164.4679,4214.2631,157.0309,4216.1911,162.3491,4210.873,164.2771,4220.72,164.4679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="3801" y="92.1049">1.1.3:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="3837" y="92.1049">find({bookId, deletedAt: null})</text></g><!--link ChapterRepo to ScrapingService--><g id="link_ChapterRepo_ScrapingService"><path codeLine="28" d="M4220.72,164.4679 C4172.82,142.0579 4089.8,106.9779 4014,93.4779 C3920.36,76.7979 3895.11,92.5879 3800,93.4779 C3024.79,100.7479 2830.54,93.0579 2056,126.2079 C1771.43,138.3879 1441.1105,163.6251 1283.2905,176.3651 " fill="none" id="ChapterRepo-to-ScrapingService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1277.31,176.8479,1286.6027,180.1108,1282.2938,176.4456,1285.959,172.1367,1277.31,176.8479" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="3836" y="92.1049">1.1.4:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="3872" y="92.1049">currentChapters[]</text></g><!--link ChapterRepo to DBMaster--><g id="link_ChapterRepo_DBMaster"><path codeLine="26" d="M4189.08,184.3279 C4039.41,184.3279 3703.24,184.3279 3568.75,184.3279 " fill="none" id="ChapterRepo-to-DBMaster" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="3562.75,184.3279,3571.75,188.3279,3567.75,184.3279,3571.75,180.3279,3562.75,184.3279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="3592.5" y="177.2249">1.1.3.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="520" x="3639.5" y="177.2249">SELECT * FROM chapters WHERE book_id=? AND deleted_at IS NULL ORDER BY number</text></g><!--link DBMaster to ChapterRepo--><g id="link_DBMaster_ChapterRepo"><path codeLine="27" d="M3562.79,189.8179 C3621.13,195.2679 3715.39,203.2379 3797,206.3279 C3867.17,208.9879 3884.82,208.8479 3955,206.3279 C4035.24,203.4479 4121.1123,196.845 4183.0723,191.485 " fill="none" id="DBMaster-to-ChapterRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="4189.05,190.9679,4179.7387,187.7585,4184.0686,191.3988,4180.4282,195.7287,4189.05,190.9679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="3798" y="202.2249">1.1.3.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="3845" y="202.2249">existingChapters[]</text></g><!--link ScrapingService to Queue--><g id="link_ScrapingService_Queue"><path codeLine="30" d="M1277.18,184.3279 C1471.79,184.3279 1920.39,184.3279 2079.12,184.3279 " fill="none" id="ScrapingService-to-Queue" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2085.12,184.3279,2076.12,180.3279,2080.12,184.3279,2076.12,188.3279,2085.12,184.3279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1467.25" y="177.2249">1.1.5:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="392" x="1503.25" y="177.2249">add("update-queue", {bookId, existingChapters, mode: "update"})</text></g><!--link Queue to ScrapingService--><g id="link_Queue_ScrapingService"><path codeLine="37" d="M2085.13,194.7879 C2019.92,206.4179 1908.72,224.4679 1812.25,231.3279 C1696.1,239.5879 1666.45,238.8079 1550.25,231.3279 C1456.81,225.3079 1356.6094,211.5759 1283.2994,200.2259 " fill="none" id="Queue-to-ScrapingService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1277.37,199.3079,1285.652,204.6378,1282.3111,200.0729,1286.876,196.732,1277.37,199.3079" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1647.75" y="227.2249">1.1.6:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1683.75" y="227.2249">jobId</text></g><!--link Queue to ScrapingService--><g id="link_Queue_ScrapingService"><path codeLine="44" d="M2085.2,177.8779 C2035.66,172.4879 1961.25,165.2379 1896.25,162.3279 C1800.79,158.0479 1561.73,158.5679 1466.25,162.3279 C1403.08,164.8079 1338.0256,169.9074 1283.4156,174.8474 " fill="none" id="Queue-to-ScrapingService-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1277.44,175.3879,1286.7638,178.5608,1282.4197,174.9375,1286.043,170.5934,1277.44,175.3879" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="11" x="1591.25" y="152.2249">3:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="1605.25" y="152.2249">processUpdateJob(jobData)</text></g><!--link ScrapingService to Queue--><g id="link_ScrapingService_Queue"><path codeLine="59" d="M1277.25,191.3079 C1350.7,196.6379 1457.1,203.5079 1550.25,206.3279 C1666.64,209.8479 1695.87,210.2179 1812.25,206.3279 C1908.3,203.1179 2013.8808,195.1465 2079.2408,189.6965 " fill="none" id="ScrapingService-to-Queue-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2085.22,189.1979,2075.9187,185.9596,2080.2373,189.6134,2076.5835,193.9319,2085.22,189.1979" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1551.25" y="202.2249">3.4:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="1576.25" y="202.2249">jobCompleted({newChapters, skipped})</text></g><!--link Queue to GMN21--><g id="link_Queue_GMN21"><path d="M2196.78,184.3279 C2216.1,184.3279 2235.43,184.3279 2254.76,184.3279 " fill="none" id="Queue-GMN21" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link ScrapingService to ScrapingService--><g id="link_ScrapingService_ScrapingService"><path codeLine="46" d="M1277.32,167.7179 C1309.16,167.4579 1335,172.9879 1335,184.3279 C1335,195.6579 1315.1598,201.2488 1283.3198,200.9788 " fill="none" id="ScrapingService-to-ScrapingService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1277.32,200.9279,1286.2858,205.0041,1282.3198,200.9703,1286.3536,197.0044,1277.32,200.9279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1341" y="189.7249">3.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="1366" y="189.7249">scrapeNewChapters(book, existingChapters)</text></g><!--link GMN21 to GMN29--><g id="link_GMN21_GMN29"><path d="M2463.4,184.3279 C2482.7,184.3279 2502,184.3279 2521.29,184.3279 " fill="none" id="GMN21-GMN29" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link ScrapingService to Cache--><g id="link_ScrapingService_Cache"><path codeLine="56" d="M1277.3,176.7679 C1435.12,163.8979 1771.41,137.9779 2056,126.2079 C2969.33,88.4179 3198.41,100.7479 4112.5,93.4779 C4163.83,93.0679 4295.88,74.2979 4343.5,93.4779 C4378.97,107.7579 4405.0423,137.5718 4421.2123,159.7218 " fill="none" id="ScrapingService-to-Cache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="4424.75,164.5679,4422.6741,154.9403,4421.8019,160.5295,4416.2127,159.6573,4424.75,164.5679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="4113.5" y="92.1049">3.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="4138.5" y="92.1049">del("book:" + bookId + ":chapters")</text></g><!--link Cache to ScrapingService--><g id="link_Cache_ScrapingService"><path codeLine="57" d="M4424.75,164.5679 C4408.58,142.4179 4378.97,107.7579 4343.5,93.4779 C4295.88,74.2979 4163.83,93.0679 4112.5,93.4779 C3198.41,100.7479 2969.33,88.4179 2056,126.2079 C1771.41,137.9779 1441.1001,163.4102 1283.2801,176.2802 " fill="none" id="Cache-to-ScrapingService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1277.3,176.7679,1286.5953,180.0232,1282.2835,176.3615,1285.9451,172.0496,1277.3,176.7679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="4206.5" y="92.1049">3.3:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="4231.5" y="92.1049">OK</text></g><!--SRC=[ZLRBRjj65DthAowqiQnQSln8qX9m2ffM4ALwE9ADeas2O4IEvR796PKSsauCVq8-8kWYw28hxxhbZ_NE38SFcJPgm10Vzp7td3DdA9aCAHmnien9H22Wu8aevSmdsVViRm4zEFLwUtiEk38b8Vj2Ol38AliXqr0aq9dHNkB7PCNuShFLse3fue9AaRG4_leIseuRH8n_u5x8A9Tj80cOoxM8Go4k4qzm6OimfB49B6xBOE-Sh2IDvtdFEOslc4zr-DgpCaVLdj6LI9WKyMSTQnyzABmMLtbQXXuHIHOaeH_u-FFytGZ6997vaeyEpKqPFAC1IppYdvj5wgloxRkKfhGwX7wWW3muE2YGFpbrHyC_tHbuxd7szUHqD9shzwsMWH9whofOWGFTxexJxSAnU-AzWMsYyDrUA82t7VKp3BPzCrUodQu28d4IDvNd8aPw9HFSWKDAOYobKq_49UNOg-o0_TR0DatxkgqfcIENT4n75CTw2bQnDDXqK-2CyM3AQUUM1GwOzBijk8rfg5UNEF1-uveka2QwyV5kirLKmOgMWBAYgJaVZ0RU2IpwtIsuxdVXzMmwrhKJMC3RwN02USK4hk7tDuFP06DPSF1hgwZOQrnmVrULLvNWcibpMwQogCVHAdCRqQc8hyZOim1rRWqoMxXbGoffu4e7U1g624WriGcJlHecEHXM4dPwhFv90G3kvCZs-4Ga3ESmEHsDO3ex6ipWy0zi6YrGyJMS6fTkngKtB94ug1N8-u_rzJu1rxxAzzCuHj5Nqfkmq_keI7ok4aaGTDf6dBs_rEisYig2kBwgBOX4G1t84zg8AXUIGioMvx85-3UklTUFUZ3Fxi7w8N1nXHRf5swPnw2_haXCm1UHQOlJKFjoeZmtfcVaIoLHXQv2xQkK1w0MqZ83FeNM2pNqXLWCWmQ46Yp3q7EhCxOWaKIckDNQ6ge0iLe3ti5LfLpUrOn1bJMUf4hgWhlFTi7rVOf9GL4zeab2blJEEjtnREeDvdDtF9YSJC6TpxEl4sysdKoDp-N3Di-gjyGg5ZxMFDLil1MB3ZPIFjtiEurbpARGxD49lQuPs4E1FD33ABjVugdfw9kTlkb18SGqVQnMw0m4Q8zGaRlzGX0y-pUYiQ7xGJyTlDU7OO3eiZFibEkhO_OVl8A8t6pgiFsYE_vpF5KQbVYyRzMMWqUgSYo4rkXCwXJBKTCaepzqsWeefmq_vPwD5st7kaeRNKadzHw5N_Cu_QrPhEL-tZCsWFnwPbTGz49UyeNIlMIh5GrmongE5a9AH5ISsKyFDNst-pfCRyHJNpVTRikIgRzH814XyndIIV9eyubK8zUIEbT8uWULJt3NB4cL_hLDZwGE-1aBAKCDu5YgNgs1vNI63X1pKjjHhNoOuvp22EiAS9Ca-y7zM721M5csQuhK7MfAVD6lMTFZ2txPeC9AT8CWV_vVWlob3yTfM8Fg8lkstdtdMRzW2qFLvvH-Z2oDIUmR2740KRYcnUY8dL5qiEmxWQj44R__qgBJosyBQHR9q94YgArriynGoXaYpbJ1Zd1sgkDjshwdYIZxk3Nfh6ZCilj0uOYiHuGlis-8TmI41uRBF6tW8vUH6ZccQCI9nhayAqgCxEh6XClidmZEyKLs7pDVwzIUJUNs_Wy0]--></g></svg>