<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="731px" preserveAspectRatio="none" style="width:3457px;height:731px;background:#FFFFFF;" version="1.1" viewBox="0 0 3457 731" width="3457px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="420" x="1511.75" y="24.9659">Diagrama de Comunica&#231;&#227;o - UC-30: Excluir Livro (Soft Delete)</text><g id="elem_Client"><rect fill="#F1F1F1" height="58.1358" style="stroke:#181818;stroke-width:0.5;" width="62" x="116.5" y="168.2879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="123.5" y="185.2539">:Admin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="128" y="204.3218">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="117.5" x2="177.5" y1="210.4238" y2="210.4238"/></g><g id="elem_Controller"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="168" x="436.5" y="177.8179"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="443.5" y="194.7839">:AdminBooksController</text><line style="stroke:#181818;stroke-width:0.5;" x1="437.5" x2="603.5" y1="200.8858" y2="200.8858"/></g><g id="elem_DeletionService"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="154" x="1000.5" y="177.8179"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1007.5" y="194.7839">:BookDeletionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="1001.5" x2="1153.5" y1="200.8858" y2="200.8858"/></g><g id="elem_BookRepo"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="121" x="1462" y="177.8179"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1469" y="194.7839">:BookRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="1463" x2="1582" y1="200.8858" y2="200.8858"/></g><g id="elem_ChapterRepo"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="143" x="2709" y="177.8179"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="2716" y="194.7839">:ChapterRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="2710" x2="2851" y1="200.8858" y2="200.8858"/></g><g id="elem_Cache"><rect fill="#F1F1F1" height="39.0679" style="stroke:#181818;stroke-width:0.5;" width="96" x="3355.5" y="177.8179"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="3362.5" y="194.7839">:RedisCache</text><line style="stroke:#181818;stroke-width:0.5;" x1="3356.5" x2="3450.5" y1="200.8858" y2="200.8858"/></g><g id="elem_DBMaster"><rect fill="#F1F1F1" height="58.1358" style="stroke:#181818;stroke-width:0.5;" width="111" x="2038" y="168.2879"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="2060" y="185.2539">:Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="2045" y="204.3218">MySQL Master</text><line style="stroke:#181818;stroke-width:0.5;" x1="2039" x2="2148" y1="210.4238" y2="210.4238"/></g><g id="elem_GMN20"><path d="M2904,130.3879 L2904,264.33 L3113,264.33 L3113,140.3879 L3103,130.3879 L2904,130.3879 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M3103,130.3879 L3103,140.3879 L3113,140.3879 L3103,130.3879 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="2910" y="149.2849">Soft Delete Pattern:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="2910" y="166.9909">UPDATE books</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="2910" y="184.697">SET deleted_at = NOW()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="2910" y="202.403">WHERE id = ?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="2910" y="220.109">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2910" y="237.815">N&#227;o remove fisicamente</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="2910" y="255.521">Mant&#233;m integridade referencial</text></g><g id="elem_GMN27"><path d="M3165.5,156.9379 L3165.5,237.762 L3303.5,237.762 L3303.5,166.9379 L3293.5,156.9379 L3165.5,156.9379 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M3293.5,156.9379 L3293.5,166.9379 L3303.5,166.9379 L3293.5,156.9379 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="3171.5" y="175.8349">Invalida:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="3171.5" y="193.5409">- Listagens de livros</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="3171.5" y="211.247">- Detalhes do livro</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="3171.5" y="228.953">- Cap&#237;tulos do livro</text></g><g id="elem_GMN33"><path d="M6,325.3279 L6,724.8603 A0,0 0 0 0 6,724.8603 L289,724.8603 A0,0 0 0 0 289,724.8603 L289,335.3279 L279,325.3279 L151.5,325.3279 L147.5,226.6879 L143.5,325.3279 L6,325.3279 A0,0 0 0 0 6,325.3279 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M279,325.3279 L279,335.3279 L289,335.3279 L279,325.3279 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="12" y="344.2249">Fluxo UC-30: Soft Delete Livro</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="12" y="361.9309">1. Admin solicita exclus&#227;o de livro</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="12" y="379.637">2. Valida que livro existe e n&#227;o foi deletado</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="12" y="397.343">3. Conta cap&#237;tulos do livro (para auditoria)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="12" y="415.049">4. Marca livro como deletado:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="21" y="432.755">- deleted_at = NOW()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="21" y="450.461">- N&#227;o remove fisicamente</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="12" y="468.167">5. Cap&#237;tulos tamb&#233;m ficam inacess&#237;veis</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="12" y="485.8731">6. Invalida todos os caches relacionados</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="12" y="503.5791">7. Retorna confirma&#231;&#227;o</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="12" y="521.2851">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="12" y="538.9911">Soft Delete Pattern:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="12" y="556.6971">- Preserva dados para auditoria</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="12" y="574.4031">- Permite recupera&#231;&#227;o futura</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="12" y="592.1092">- Mant&#233;m integridade referencial</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="12" y="609.8152">- Filtros sempre incluem: deleted_at IS NULL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="12" y="627.5212">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="12" y="645.2272">Efeitos em Cascade:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="12" y="662.9332">- Livro n&#227;o aparece em listagens</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="12" y="680.6392">- Cap&#237;tulos ficam inacess&#237;veis</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="12" y="698.3453">- Removido de cole&#231;&#245;es automaticamente</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="12" y="716.0513">- Cache totalmente limpo</text></g><!--link Client to Controller--><g id="link_Client_Controller"><path codeLine="15" d="M178.98,197.3579 C235.18,197.3579 348.54,197.3579 430.15,197.3579 " fill="none" id="Client-to-Controller" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="436.15,197.3579,427.15,193.3579,431.15,197.3579,427.15,201.3579,436.15,197.3579" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="11" x="209" y="172.2549">1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="223" y="172.2549">DELETE /admin/books/:bookId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="205" y="189.9609">Authorization: Bearer adminToken</text></g><!--link Controller to Client--><g id="link_Controller_Client"><path codeLine="53" d="M436.09,213.3079 C419.54,215.8279 402.27,218.0279 386,219.3579 C316.45,225.0079 298.17,228.5279 229,219.3579 C212.15,217.1179 199.5756,214.1266 184.5856,209.6166 " fill="none" id="Controller-to-Client" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="178.84,207.8879,186.3059,214.3113,183.628,209.3285,188.6108,206.6505,178.84,207.8879" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="11" x="230" y="215.2549">2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="244" y="215.2549">200 OK {message, data}</text></g><!--link Controller to DeletionService--><g id="link_Controller_DeletionService"><path codeLine="17" d="M604.88,208.1079 C643.81,212.5579 690.68,217.1679 733,219.3579 C794.7,222.5379 810.31,222.6479 872,219.3579 C914.46,217.0879 955.6823,212.9193 994.1223,208.3293 " fill="none" id="Controller-to-DeletionService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1000.08,207.6179,990.6692,204.7132,995.1153,208.2107,991.6177,212.6568,1000.08,207.6179" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="734" y="215.2549">1.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="759" y="215.2549">softDelete(bookId)</text></g><!--link DeletionService to Controller--><g id="link_DeletionService_Controller"><path codeLine="52" d="M1000.11,197.3579 C896.17,197.3579 718.15,197.3579 610.79,197.3579 " fill="none" id="DeletionService-to-Controller" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="604.79,197.3579,613.79,201.3579,609.79,197.3579,613.79,193.3579,604.79,197.3579" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="631" y="190.2549">1.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="656" y="190.2549">{message: "Livro exclu&#237;do", bookId, chaptersAffected}</text></g><!--link DeletionService to BookRepo--><g id="link_DeletionService_BookRepo"><path codeLine="19" d="M1154.76,197.3579 C1241.87,197.3579 1375.73,197.3579 1455.51,197.3579 " fill="none" id="DeletionService-to-BookRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1461.51,197.3579,1452.51,193.3579,1456.51,197.3579,1452.51,201.3579,1461.51,197.3579" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1181.25" y="190.2549">1.1.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="1217.25" y="190.2549">findOne({id: bookId, deletedAt: null})</text></g><!--link BookRepo to DeletionService--><g id="link_BookRepo_DeletionService"><path codeLine="22" d="M1475.79,217.3779 C1449.2,227.6779 1414.97,239.1479 1383.25,244.3579 C1350.36,249.7579 1266.23,249.2179 1233.25,244.3579 C1198.04,239.1579 1165.4308,229.648 1135.6308,219.348 " fill="none" id="BookRepo-to-DeletionService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1129.96,217.3879,1137.1595,224.1085,1134.6857,219.0213,1139.7729,216.5474,1129.96,217.3879" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1274.75" y="240.2549">1.1.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1310.75" y="240.2549">book</text></g><!--link DeletionService to BookRepo--><g id="link_DeletionService_BookRepo"><path codeLine="29" d="M1154.91,210.4679 C1179.84,214.1079 1207.64,217.5579 1233.25,219.3579 C1299.75,224.0279 1316.79,224.5679 1383.25,219.3579 C1409.11,217.3279 1431.5152,214.2152 1455.8252,210.0752 " fill="none" id="DeletionService-to-BookRepo-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1461.74,209.0679,1452.1962,206.6356,1456.811,209.9073,1453.5393,214.5221,1461.74,209.0679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1234.25" y="215.2549">1.1.5:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1270.25" y="215.2549">softDelete(bookId)</text></g><!--link BookRepo to DeletionService--><g id="link_BookRepo_DeletionService"><path codeLine="41" d="M1461.61,179.8179 C1453.15,177.9779 1444.53,176.3979 1436.25,175.3579 C1379.8,168.2679 1236.82,169.3679 1180.25,175.3579 C1172,176.2279 1169.3413,176.4599 1160.8313,177.9399 " fill="none" id="BookRepo-to-DeletionService-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1154.92,178.9679,1164.4723,181.3667,1159.8461,178.1112,1163.1015,173.485,1154.92,178.9679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1254.75" y="165.2549">1.1.6:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1290.75" y="165.2549">{affected: 1}</text></g><!--link BookRepo to DBMaster--><g id="link_BookRepo_DBMaster"><path codeLine="20" d="M1583.34,197.3579 C1694.83,197.3579 1924.32,197.3579 2031.84,197.3579 " fill="none" id="BookRepo-to-DBMaster" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2037.84,197.3579,2028.84,193.3579,2032.84,197.3579,2028.84,201.3579,2037.84,197.3579" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1610" y="190.2549">1.1.1.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="1657" y="190.2549">SELECT * FROM books WHERE id=? AND deleted_at IS NULL</text></g><!--link DBMaster to BookRepo--><g id="link_DBMaster_BookRepo"><path codeLine="21" d="M2037.5,226.7779 C2021.04,233.9879 2002.69,240.6879 1985,244.3579 C1947.03,252.2279 1674.03,251.9179 1636,244.3579 C1609.64,239.1179 1587.1534,230.2353 1565.6034,219.9353 " fill="none" id="DBMaster-to-BookRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1560.19,217.3479,1566.5852,224.838,1564.7012,219.5041,1570.0351,217.6201,1560.19,217.3479" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1757.5" y="240.2549">1.1.1.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="1804.5" y="240.2549">bookData</text></g><!--link BookRepo to DBMaster--><g id="link_BookRepo_DBMaster"><path codeLine="39" d="M1583.45,211.3879 C1600.37,214.6779 1618.82,217.7079 1636,219.3579 C1713.2,226.7679 1907.83,227.0979 1985,219.3579 C2002.21,217.6279 2014.8543,215.613 2031.6343,212.143 " fill="none" id="BookRepo-to-DBMaster-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2037.51,210.9279,2027.8864,208.8334,2032.6136,211.9405,2029.5065,216.6676,2037.51,210.9279" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1637" y="215.2549">1.1.5.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="1684" y="215.2549">UPDATE books SET deleted_at=NOW() WHERE id=?</text></g><!--link DBMaster to BookRepo--><g id="link_DBMaster_BookRepo"><path codeLine="40" d="M2037.78,180.2379 C2029.22,178.2079 2020.43,176.4679 2012,175.3579 C1967.61,169.4679 1653.43,169.7879 1609,175.3579 C1600.54,176.4179 1597.5911,176.7443 1588.9611,178.6343 " fill="none" id="DBMaster-to-BookRepo-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1583.1,179.9179,1592.7474,181.8999,1587.9842,178.8483,1591.0359,174.0851,1583.1,179.9179" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1740.5" y="165.2549">1.1.5.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1787.5" y="165.2549">affectedRows: 1</text></g><!--link DeletionService to ChapterRepo--><g id="link_DeletionService_ChapterRepo"><path codeLine="24" d="M1110.29,177.4079 C1152.01,153.3079 1227.13,114.1279 1297.5,99.1279 C1395.74,78.1979 1423.08,96.7279 1523.5,99.1279 C1813.53,106.0779 1886.3,107.4679 2175.5,130.3879 C2368.81,145.6979 2589.8887,172.7049 2702.9787,187.2049 " fill="none" id="DeletionService-to-ChapterRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2708.93,187.9679,2700.5118,182.8558,2703.9706,187.332,2699.4944,190.7909,2708.93,187.9679" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1298.5" y="96.2849">1.1.3:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="1334.5" y="96.2849">count({bookId, deletedAt: null})</text></g><!--link ChapterRepo to DeletionService--><g id="link_ChapterRepo_DeletionService"><path codeLine="27" d="M2708.93,187.9679 C2595.84,173.4679 2368.81,145.6979 2175.5,130.3879 C1886.3,107.4679 1813.53,106.0779 1523.5,99.1279 C1423.08,96.7279 1395.74,78.1979 1297.5,99.1279 C1227.13,114.1279 1157.2055,150.3067 1115.4855,174.4067 " fill="none" id="ChapterRepo-to-DeletionService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1110.29,177.4079,1120.084,176.3697,1114.6195,174.9069,1116.0824,169.4425,1110.29,177.4079" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1351.5" y="96.2849">1.1.4:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="1387.5" y="96.2849">totalChapters</text></g><!--link ChapterRepo to DBMaster--><g id="link_ChapterRepo_DBMaster"><path codeLine="25" d="M2708.7,197.3579 C2571.2,197.3579 2279.41,197.3579 2155.43,197.3579 " fill="none" id="ChapterRepo-to-DBMaster" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2149.43,197.3579,2158.43,201.3579,2154.43,197.3579,2158.43,193.3579,2149.43,197.3579" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="2176" y="190.2549">1.1.3.1:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="459" x="2223" y="190.2549">SELECT COUNT(*) FROM chapters WHERE book_id=? AND deleted_at IS NULL</text></g><!--link DBMaster to ChapterRepo--><g id="link_DBMaster_ChapterRepo"><path codeLine="26" d="M2149.42,203.2579 C2203.87,208.6879 2289.01,216.3379 2363,219.3579 C2484.48,224.3079 2619.7487,213.944 2702.8887,205.784 " fill="none" id="DBMaster-to-ChapterRepo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2708.86,205.1979,2699.5123,202.0962,2703.8839,205.6863,2700.2938,210.0579,2708.86,205.1979" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="2364" y="215.2549">1.1.3.2:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="2411" y="215.2549">chapterCount</text></g><!--link DBMaster to GMN20--><g id="link_DBMaster_GMN20"><path d="M2149.35,186.3279 C2300.97,157.1979 2717.81,82.5779 2851.5,115.3879 C2868.97,119.6679 2886.65,126.2779 2903.54,133.9179 " fill="none" id="DBMaster-GMN20" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link DeletionService to Cache--><g id="link_DeletionService_Cache"><path codeLine="43" d="M1154.83,179.0979 C1226.98,162.9679 1337.86,140.4879 1435.5,130.3879 C2085.07,63.1679 2251.5,106.0779 2904.5,99.1279 C3093.89,97.1179 3159.91,46.0679 3329.5,130.3879 C3352.31,141.7279 3369.3107,157.6541 3383.0707,172.9741 " fill="none" id="DeletionService-to-Cache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="3387.08,177.4379,3384.042,168.0693,3383.7389,173.7181,3378.0902,173.415,3387.08,177.4379" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="2905.5" y="96.2849">1.1.7:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="2941.5" y="96.2849">del("books:*", "book:" + bookId + ":*")</text></g><!--link Cache to DeletionService--><g id="link_Cache_DeletionService"><path codeLine="50" d="M3387.08,177.4379 C3373.32,162.1179 3352.31,141.7279 3329.5,130.3879 C3159.91,46.0679 3093.89,97.1179 2904.5,99.1279 C2251.5,106.0779 2085.07,63.1679 1435.5,130.3879 C1337.86,140.4879 1232.8355,161.6589 1160.6855,177.7889 " fill="none" id="Cache-to-DeletionService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1154.83,179.0979,1164.4859,181.038,1159.7095,178.007,1162.7405,173.2307,1154.83,179.0979" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="3007.5" y="96.2849">1.1.8:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="3043.5" y="96.2849">OK</text></g><!--link GMN20 to GMN27--><g id="link_GMN20_GMN27"><path d="M3113.11,197.3579 C3130.5,197.3579 3147.89,197.3579 3165.27,197.3579 " fill="none" id="GMN20-GMN27" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[ZLRDRkCs4BxhAGQ-r57Npjzcjn3WBXpRGOCwSMexkvS02qOQnUnAf4jIxcw3F4qFHGyvzWdyOXsIagquTZQ60SlaDyEPRxuPod2J8VGvkrCiPv0Wz6HU21wpvJ_BloMquBhNEZw8OF0rpWgkOCWNIa9p8bC3VSpGu5uG_02Zsz_HI1r8-eqDDA9kadDn8tePHs4Qm3Junmt4gPHVT4yAesIMeVB0rTyrsEBSSLoA2Qe5Zz5XDzQU6ennBZKtKdrps6ff3UhDsDoWsi3LLjVGCIPSzrWyy-Uwf_LkdnbsopJUY8jlaz-6SC6qARFfd_e_bgLEfrFnEHcTJQ4_60wc0nYUVnoFx6OGU9AWzNED1OWW30-ZCApm-ynIjtzhkTkFxCzvSYEwXPb9nVzYbey8Jf4fidNGgVo2WfolNT816zJvKzhk74tLzSLjUkzKuqquUQW8hKozSSf5CXBOlET91Dxy3GdBUakw9W9HPDd3Nh0ojg6K7AqTULSJohStXH3EngCBvql3fry6um7mfFC1kfVzol5dPk1y0fVNms6myjRQ6cFxoBgspcpLQd7ivcHjifM7cc1M5iVM8fQ5CCtxtIJKBRVnSFo4Xzxe-dBQ3FSy7R6thHYnXtn-DIrRG_PfbdvxDlQd0Rv0q5jhQQHXMMcXNwUOanro4z8WA7utCm7GfpPku8ePyYyYjt5zrUzEVVBQ8mVJUl8Tk1nzQkwvhKevjFWXS2kNTiGfpEK2IRQQfbvEtOTkxu89i_mt1quBTuedZ6QZmXGLYfYpB42HW8toPI6V-0BMmzm8iUC2hCdwE_ezyLLYQKgZ1vEn_5D7SFWw6R-pblULAPazRDUp7Muhe_VMYE9jDbpuKTXu0-unQi2FPOFJGuCsdjNjN2nOHjpvOhNezj26tQ7GzgR9x5MYovq-adPcI1lIRvJhFJPVFfeYaxMT5VK-q9So_ia6F_frIvfRHgndzZv7hId821h-iaDxzIqV4qc9LwrSDL-tvFBXoN2rllqWjtwTrwE30ufZvPo60GqVejyHTYkDaJd8jBeaRUvXU9OLN-NgmgYrW8ih31tii0tk9gKkodZC3VFnQYljYcG7F6h3HrSC-ACermbA1K5041QUIkw5oH9lSjns7368drS1cdEc6B0YiJSdPxx7thQfSLJCIamiSxbowKNWghgZGztUIqrvqguBmh3yrhPeQZ7Kg2mcSfUF2-HULU_QAm7IR4h8WhwnrOoc0p8ManueBWz-tuOnlS8eGTbAaNAL-rUWe2p6jX5Kbg05Lmer2OjUeAm_UCfCXK6LSziT61TpLEKBLbgOGbMGxyqSZphZ6IbDWyPyhf30L6xCesqplunza2A5eW5pea_7v7OTkjUugp-Zk95wWs1PrQZFst0NsotYZuh64wUxM6P86Vv7LBE2n4rl9VL2jieXuwuCjqn7vlDQR_yF]--></g></svg>